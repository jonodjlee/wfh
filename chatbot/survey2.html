<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>WFM Survey</title>

    <link rel="shortcut icon" href="" type="image/x-icon">
    <link rel="apple-touch-icon" href="">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="assets/conversational-form-1.0.2/dist/conversational-form-dark.css">
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="assets/css/chat.css">
    <link rel="stylesheet" href="assets/css/fonts.css">
    <style>
        .conversational-form {
            font-family: 'gtreg';
        }

    </style>

</head>

<body>
    <form id="form" class="textgtreg">
        <cf-robot-message class="textgtreg" cf-questions="Hello there &#x1F44B;&amp;&amp;Let's begin..."></cf-robot-message>
        <input required type="text" name="firstname" id="firstname" cf-input-placeholder="Type your first name here..." cf-error="Please enter your first name." cf-questions="What's your first name?" />
        <input required type="text" name="lastname" id="lastname" cf-input-placeholder="Type your last name here..." cf-error="Please enter your last name or initial." cf-questions="Hi {firstname}, what's your last name or initial?" />
        <input required type="email" name="email" id="email" cf-input-placeholder="Type your email here..." cf-error="Please enter a valid email." cf-questions="{firstname} {lastname}, great to meet you! What's your email?" />
        
        <fieldset cf-questions="Thanks for that!&amp;&amp;I'll now ask a few questions to understand you better...&amp;&amp;What's your age range?">
            <input required type="radio" name="age" id="age1" value="â‰¤21">
            <label for="age1">&le;21</label>

            <input required type="radio" name="age" id="age2" value="22-35">
            <label for="age2">22-35</label>
            
            <input required type="radio" name="age" id="age3" value="36-49">
            <label for="age3">36-49</label>
            
            <input required type="radio" name="age" id="age4" value="50+">
            <label for="age4">50+</label>
        </fieldset>
        
        <input required type="text" name="industry" id="industry" cf-error="Please enter your industry." cf-questions="What industry do you work in?"/>

        <fieldset cf-questions="Interesting! Do you currently work remotely?">
            <input required type="radio" name="remote" id="remotetrue" value="yes">
            <label for="remotetrue">Yes</label>

            <input required type="radio" name="remote" id="remotefalse" value="no">
            <label for="remotefalse">No</label>
        </fieldset>

        <fieldset cf-questions="Ok! Have you worked remotely in the past?">
            <input required type="radio" name="yesremotepast" id="currentremotepasttrue" value="yes" cf-conditional-remote="yes">
            <label for="currentremotepasttrue">Yes</label>

            <input required type="radio" name="yesremotepast" id="currentremotepastfalse" value="no" cf-conditional-remote="yes">
            <label for="currentremotepastfalse">No</label>
        </fieldset>

        <input type="text" name="findingwfh" id="findingwfh" cf-questions="How are you finding working from home?" cf-conditional-yesremotepast="no">
        
        <fieldset cf-questions="Alright! Are you comfortable working from home?">
            <input required type="radio" name="yesremotepastcomfortable" id="currentremotepasttruecomforttrue" value="yes" cf-conditional-findingwfh="[\w\W]*" cf-conditional-yesremotepast="yes">
            <label for="currentremotepasttruecomforttrue">Yes</label>

            <input required type="radio" name="yesremotepastcomfortable" id="currentremotepastfalsecomfortfalse" value="no" cf-conditional-findingwfh="[\w\W]*" cf-conditional-yesremotepast="yes">
            <label for="currentremotepastfalsecomfortfalse">No</label>
        </fieldset>

        <input type="text" name="yesremotepastnocomfortexp" id="yesremotepastnocomfortexp" cf-questions="Could you please explain why?" cf-conditional-yesremotepastcomfortable="no">
        
        <fieldset cf-questions="Are you an employer or employee?">
            <input required type="radio" name="yesrole" id="yesroleemployer" value="employer" cf-conditional-yesremotepastcomfortable="yes" cf-conditional-yesremotepastnocomfortexp="[\w\W]*">
            <label for="yesroleemployer">Employer</label>

            <input required type="radio" name="yesrole" id="yesroleemployee" value="employee" cf-conditional-yesremotepastcomfortable="yes" cf-conditional-yesremotepastnocomfortexp="[\w\W]*">
            <label for="yesroleemployee">Employee</label>
        </fieldset>
        
        <fieldset cf-questions="Do you oversee or manage other employees?">
            <input required type="radio" name="yesmanager" id="yesmanagertrue" value="yes" cf-conditional-yesrole="employee">
            <label for="yesmanagertrue">Yes</label>

            <input required type="radio" name="yesmanager" id="yesmanagerfalse" value="no" cf-conditional-yesrole="employee">
            <label for="yesmanagerfalse">No</label>
        </fieldset>

        <fieldset cf-questions="Next one... Has working from home affected the quality of your work or your productivity?">
            <input required type="radio" name="yesremotepastquality" id="currentremotepastqualitytrue" value="yes" cf-conditional-yesrole="employer" cf-conditional-yesmanager="yes||no">
            <label for="currentremotepastqualitytrue">Yes</label>

            <input required type="radio" name="yesremotepastquality" id="currentremotepastqualityfalse" value="no" cf-conditional-yesrole="employer" cf-conditional-yesmanager="yes||no">
            <label for="currentremotepastqualityfalse">No</label>
        </fieldset>

        <input type="text" name="yesremotepastqualityexp" id="yesremotepastqualityexp" cf-questions="Could you please elaborate?" cf-conditional-yesremotepastquality="yes">

        <fieldset cf-questions="Sweet... Do you currently have adequate infrastructure or appropriate furniture to work from home?">
            <input required type="radio" name="yesremotepastinfra" id="currentremotepastinfratrue" value="yes" cf-conditional-yesremotepastqualityexp="[\w\W]*">
            <label for="currentremotepastinfratrue">Yes</label>

            <input required type="radio" name="yesremotepastinfra" id="currentremotepastinfrafalse" value="no" cf-conditional-yesremotepastqualityexp="[\w\W]*">
            <label for="currentremotepastinfrafalse">No</label>
        </fieldset>

        <input type="text" name="yesremotepastinfraexp" id="yesremotepastinfraexp" cf-questions="Could you please explain further?" cf-conditional-yesremotepastinfra="no">

        <input type="text" name="yesremotepastchange" id="yesremotepastchange" cf-questions="Would you change anything about how you work remotely?" cf-conditional-yesremotepastinfraexp="" cf-conditional-remote="yes">

        <fieldset cf-questions="Nice! Have you worked remotely in the past?">
            <input required type="radio" name="noremotepast" id="pastremotepasttrue" value="yes" cf-conditional-remote="no">
            <label for="pastremotepasttrue">Yes</label>

            <input required type="radio" name="noremotepast" id="pastremotepastfalse" value="no" cf-conditional-remote="no">
            <label for="pastremotepastfalse">No</label>
        </fieldset>

        <input type="text" name="noremotepastchange" id="noremotepastchange" cf-questions="How has your working environment evolved since the start of 2020?" cf-conditional-noremotepast="yes||no">

        <fieldset cf-questions="Okie dokie... Would you be willing to purchase an online course designed to increase your productivity while working from home?">
            <input required type="radio" name="course" id="coursetrue" value="yes">
            <label for="coursetrue">Yes</label>

            <input required type="radio" name="course" id="coursefalse" value="no">
            <label for="coursefalse">No</label>
        </fieldset>

        <input type="hidden" name="_subject" value="New WFH Survey submission">
        <input type="hidden" name="_captcha" value="false">
        <input type="hidden" name="_webhook" value="https://hook.integromat.com/ckv595xf9a1uvh9kjykg4gyjp9s21opd">
        <input type="hidden" name="_url" value="https://remoteworksurvey.netlify.app/survey.html">
        <input type="hidden" name="_next" value="https://remoteworksurvey.netlify.app/success.html">

    </form>
    <div id="cf-context" role="cf-context" cf-context></div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="assets/conversational-form-1.0.2/dist/conversational-form.js"></script>
    <script>
        window.onload = function() {
            var testValidation = function(dto, success, error) {
                console.log("dto....", dto, success, error);
                if (dto.text.indexOf("world") != -1) return success();
                return error();
            };

            const dispatcher = new cf.EventDispatcher();
            dispatcher.addEventListener(
                cf.ChatListEvents.CHATLIST_UPDATED,
                function(event) {
                    // console.log("chat list updated...", event);
                },
                false
            );

            var conversationalForm = new cf.ConversationalForm({
                formEl: document.getElementById("form"),
                context: document.getElementById("cf-context"),
                eventDispatcher: dispatcher,
                preventAutoFocus: false,
                showProgressBar: true,
                loadExternalStyleSheet: false,
                theme: 'dark',
                flowStepCallback: function(dto, success, error) {
                    success();
                },
                submitCallback: function() {
                    /*const scriptURL = 'https://api.formcake.com/api/form/6115f711-a3df-450b-ab9c-052a53ff4ff2/submission' //'https://formsubmit.co/bc7465f0b14036c3a724aed6c8863560'
                    conversationalForm.addRobotChatResponse("That's it! Thanks for your time &#x1F60A;");
                    fetch(scriptURL, {
                            method: 'POST',
                            body: new FormData(form)
                        })
                        .then(response => setTimeout(function() {
                            window.location();
                        }, 5000))
                        .catch(error => console.error('Error!', error.message)).then(function() {
                            window.location.assign('https://remoteworksurvey.netlify.app/success.html')
                        });*/

                    var formData = conversationalForm.getFormData();
                    var formDataSerialized = conversationalForm.getFormData(true);
                    console.log("Formdata:", formData);
                    console.log("Formdata, serialized:", formDataSerialized);

                    /* const SUBMISSION_ENDPOINT = 'https://api.formcake.com/api/form/6115f711-a3df-450b-ab9c-052a53ff4ff2/submission';
                     const formcakePost = (data = {formData}) => fetch(SUBMISSION_ENDPOINT, {
                         method: 'POST',
                         headers: {
                             'Content-Type': 'application/json'
                         },
                         body: JSON.stringify(data),
                     });

                     formcakePost({
                             example: 'data'
                         })
                         .then((response) => response.json())
                         .then((data) => console.log(data));*/

                    /*var jqxhr = $.post('https://api.formcake.com/api/form/6115f711-a3df-450b-ab9c-052a53ff4ff2/submission', formDataSerialized, function(data) {
                        console.log("Success! Data: " + data.statusText);
                    }).then(function() {
                        location.href = 'https://remoteworksurvey.netlify.app/success.html'
                    });*/

                    $(function() {
                        var jqxhr = $.post("https://api.formcake.com/api/form/6115f711-a3df-450b-ab9c-052a53ff4ff2/submission", $("#form").serialize(), function(data) {
                            console.log("Success! Data: " + data.statusText);
                            $(location).attr('href', 'https://remoteworksurvey.netlify.app/success.html');
                        });
                    })

                }
            });
        };

    </script>
</body>
